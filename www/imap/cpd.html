<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>IMAP - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://james.apache.org/index.html" id="bannerLeft">
    
                                            <img src="images/james-imap-logo.gif" alt="" />
    
            </a>
                        <a href="http://www.apache.org/index.html" id="bannerRight">
    
                                            <img src="images/asf-logo-reduced.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
            <div class="xleft">
        Last Published: 12/03/2008
                      </div>
            <div class="xright">      <a href="../index.html">JAMES Project</a>
          |
          <a href="../server/index.html">Server</a>
          |
          <a href="../mailet/index.html">Mailets</a>
          |
          <a href="../jspf/index.html">jSPF</a>
          |
          <a href="../mime4j/index.html">Mime4J</a>
          |
          <a href="../jsieve/index.html">JSieve</a>
          |
          <a href="../postage/index.html">Postage</a>
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
                   <h5>Project Documentation</h5>
        <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
              <a href="project-info.html">Project Information</a>
              </li>
              
                
              
            
            
      
            
      
            
      
            
      
            
      
            
      
              
            <li class="expanded">
              <a href="project-reports.html">Project Reports</a>
                <ul>
                  
    <li class="none">
              <strong>CPD Report</strong>
        </li>
                  
    <li class="none">
              <a href="apidocs/index.html">JavaDocs</a>
        </li>
                  
    <li class="none">
              <a href="pmd.html">PMD Report</a>
        </li>
                  
    <li class="none">
              <a href="rat-report.html">RAT Report</a>
        </li>
                  
    <li class="none">
              <a href="xref/index.html">Source Xref</a>
        </li>
                  
    <li class="none">
              <a href="testapidocs/index.html">Test JavaDocs</a>
        </li>
                  
    <li class="none">
              <a href="xref-test/index.html">Test Source Xref</a>
        </li>
              </ul>
        </li>
          </ul>
          <h5>Useful Information</h5>
        <ul>
              
    <li class="none">
              <a href="http://jakarta.apache.org/site/getinvolved.html">Get Involved</a>
        </li>
              
    <li class="none">
              <a href="http://jakarta.apache.org/site/library.html">Reference Library</a>
        </li>
          </ul>
          <h5>The Apache Software Foundation</h5>
        <ul>
              
    <li class="none">
              <a href="http://apache.org/foundation/faq.html">FAQ</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/sponsorship.html">Sponsorship</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/contributing.html">Donations</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/thanks.html">Thanks</a>
        </li>
          </ul>
          <h5>Downloads</h5>
        <ul>
              
    <li class="none">
              <a href="../download.cgi">Stable releases</a>
        </li>
              
    <li class="none">
              <a href="../downloadunstable.cgi">Unstable releases</a>
        </li>
              
    <li class="none">
              <a href="http://people.apache.org/builds/james/nightly/">Nightly builds</a>
        </li>
          </ul>
                                       <a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results</h2><p>The following document contains the results of PMD's  <a href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.1.</p></div><div class="section"><h2>Duplications</h2><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBody.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBody.html#116">116</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageHeader.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageHeader.html#170">170</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            this.value = v;
            setModified(true);
        }

    }

    private MessageRow aMessageRow;

    /**
     * Declares an association between this object and a MessageRow object
     * 
     * @param v
     *            MessageRow
     * @throws TorqueException
     */
    public void setMessageRow(MessageRow v) throws TorqueException {
        if (v == null) {
            setMailboxId(0);
        } else {
            setMailboxId(v.getMailboxId());
        }
        if (v == null) {
            setUid(0);
        } else {
            setUid(v.getUid());
        }
        aMessageRow = v;
    }

    /**
     * Returns the associated MessageRow object. If it was not retrieved before,
     * the object is retrieved from the database
     * 
     * @return the associated MessageRow object
     * @throws TorqueException
     */
    public MessageRow getMessageRow() throws TorqueException {
        if (aMessageRow == null &amp;&amp; (this.mailboxId != 0 &amp;&amp; this.uid != 0)) {
            aMessageRow = MessageRowPeer.retrieveByPK(this.mailboxId, this.uid);
        }
        return aMessageRow;
    }

    /**
     * Return the associated MessageRow object If it was not retrieved before,
     * the object is retrieved from the database using the passed connection
     * 
     * @param connection
     *            the connection used to retrieve the associated object from the
     *            database, if it was not retrieved before
     * @return the associated MessageRow object
     * @throws TorqueException
     */
    public MessageRow getMessageRow(Connection connection)
            throws TorqueException {
        if (aMessageRow == null &amp;&amp; (this.mailboxId != 0 &amp;&amp; this.uid != 0)) {
            aMessageRow = MessageRowPeer.retrieveByPK(this.mailboxId, this.uid,
                    connection);
        }
        return aMessageRow;
    }

    /**
     * Provides convenient way to set a relationship based on a ObjectKey, for
     * example &lt;code&gt;bar.setFooKey(foo.getPrimaryKey())&lt;/code&gt;
     * 
     * Note: It is important that the xml schema used to create this class
     * maintains consistency in the order of related columns between
     * message_header and message. If for some reason this is impossible, this
     * method should be overridden in &lt;code&gt;MessageHeader&lt;/code&gt;.
     */
    public void setMessageRowKey(ObjectKey key) throws TorqueException {
        SimpleKey[] keys = (SimpleKey[]) key.getValue();

        setMailboxId(((NumberKey) keys[0]).longValue());

        setUid(((NumberKey) keys[1]).longValue());
    }

    private static List fieldNames = null;

    /**
     * Generate a list of field names.
     * 
     * @return a list of field names
     */
    public static synchronized List getFieldNames() {
        if (fieldNames == null) {
            fieldNames = new ArrayList();
            fieldNames.add(&quot;MailboxId&quot;);
            fieldNames.add(&quot;Uid&quot;);
            fieldNames.add(&quot;LineNumber&quot;);</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.html#680">680</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageRowPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageRowPeer.html#690">690</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            return (MessageRow) v.get(0);
        }
    }

    /**
     * Retrieve a multiple objects by pk
     * 
     * @param pks
     *            List of primary keys
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List retrieveByPKs(List pks) throws TorqueException {
        Connection db = null;
        List retVal = null;
        try {
            db = Torque.getConnection(DATABASE_NAME);
            retVal = retrieveByPKs(pks, db);
        } finally {
            Torque.closeConnection(db);
        }
        return retVal;
    }

    /**
     * Retrieve a multiple objects by pk
     * 
     * @param pks
     *            List of primary keys
     * @param dbcon
     *            the connection to use
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List retrieveByPKs(List pks, Connection dbcon)
            throws TorqueException {
        List objs = null;
        if (pks == null || pks.size() == 0) {
            objs = new LinkedList();
        } else {
            Criteria criteria = new Criteria();
            Iterator iter = pks.iterator();
            while (iter.hasNext()) {
                ObjectKey pk = (ObjectKey) iter.next();
                SimpleKey[] keys = (SimpleKey[]) pk.getValue();
                Criteria.Criterion c0 = criteria.getNewCriterion(MAILBOX_ID,
                        keys[0], Criteria.EQUAL);
                Criteria.Criterion c1 = criteria.getNewCriterion(UID, keys[1],
                        Criteria.EQUAL);
                c0.and(c1);
                criteria.or(c0);
            }
            objs = doSelect(criteria, dbcon);
        }
        return objs;
    }

    /**
     * retrieve object using using pk values.
     * 
     * @param mailboxId
     *            long
     * @param uid
     *            long
     */
    public static MessageRow retrieveByPK(long mailboxId, long uid)</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/map/MessageBodyMapBuilder.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/map/MessageBodyMapBuilder.html#63">63</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/map/MessageFlagsMapBuilder.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/map/MessageFlagsMapBuilder.html#63">63</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>                .setPeerClass(org.apache.james.mailboxmanager.torque.om.MessageHeaderPeer.class);
        tMap.setPrimaryKeyMethod(&quot;none&quot;);

        ColumnMap cMap = null;

        // ------------- Column: mailbox_id --------------------
        cMap = new ColumnMap(&quot;mailbox_id&quot;, tMap);
        cMap.setType(new Long(0));
        cMap.setTorqueType(&quot;BIGINT&quot;);
        cMap.setUsePrimitive(true);
        cMap.setPrimaryKey(true);
        cMap.setNotNull(true);
        cMap.setJavaName(&quot;MailboxId&quot;);
        cMap.setAutoIncrement(false);
        cMap.setProtected(false);
        cMap.setDescription(&quot;Mailbox Id&quot;);
        cMap.setInheritance(&quot;false&quot;);
        cMap.setForeignKey(&quot;message&quot;, &quot;mailbox_id&quot;);
        cMap.setPosition(1);
        tMap.addColumn(cMap);
        // ------------- Column: uid --------------------
        cMap = new ColumnMap(&quot;uid&quot;, tMap);
        cMap.setType(new Long(0));
        cMap.setTorqueType(&quot;BIGINT&quot;);
        cMap.setUsePrimitive(true);
        cMap.setPrimaryKey(true);
        cMap.setNotNull(true);
        cMap.setJavaName(&quot;Uid&quot;);
        cMap.setAutoIncrement(false);
        cMap.setProtected(false);
        cMap.setDescription(&quot;&quot;);
        cMap.setInheritance(&quot;false&quot;);
        cMap.setForeignKey(&quot;message&quot;, &quot;uid&quot;);
        cMap.setPosition(2);
        tMap.addColumn(cMap);
        // ------------- Column: line_number --------------------
        cMap = new ColumnMap(&quot;line_number&quot;, tMap);</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.html#680">680</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageHeaderPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageHeaderPeer.html#700">700</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            return (MessageHeader) v.get(0);
        }
    }

    /**
     * Retrieve a multiple objects by pk
     * 
     * @param pks
     *            List of primary keys
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List retrieveByPKs(List pks) throws TorqueException {
        Connection db = null;
        List retVal = null;
        try {
            db = Torque.getConnection(DATABASE_NAME);
            retVal = retrieveByPKs(pks, db);
        } finally {
            Torque.closeConnection(db);
        }
        return retVal;
    }

    /**
     * Retrieve a multiple objects by pk
     * 
     * @param pks
     *            List of primary keys
     * @param dbcon
     *            the connection to use
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List retrieveByPKs(List pks, Connection dbcon)
            throws TorqueException {
        List objs = null;
        if (pks == null || pks.size() == 0) {
            objs = new LinkedList();
        } else {
            Criteria criteria = new Criteria();
            Iterator iter = pks.iterator();
            while (iter.hasNext()) {
                ObjectKey pk = (ObjectKey) iter.next();
                SimpleKey[] keys = (SimpleKey[]) pk.getValue();
                Criteria.Criterion c0 = criteria.getNewCriterion(MAILBOX_ID,
                        keys[0], Criteria.EQUAL);
                Criteria.Criterion c1 = criteria.getNewCriterion(UID, keys[1],
                        Criteria.EQUAL);
                c0.and(c1);</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMailboxRowPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMailboxRowPeer.html#101">101</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.html#89">89</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>    protected static final Class CLASS_DEFAULT = initClass(CLASSNAME_DEFAULT);

    /**
     * Class object initialization method.
     * 
     * @param className
     *            name of the class to initialize
     * @return the initialized class
     */
    private static Class initClass(String className) {
        Class c = null;
        try {
            c = Class.forName(className);
        } catch (Throwable t) {
            log
                    .error(
                            &quot;A FATAL ERROR has occurred which should not &quot;
                                    + &quot;have happened under any circumstance.  Please notify &quot;
                                    + &quot;the Torque developers &lt;torque-dev@db.apache.org&gt; &quot;
                                    + &quot;and give as many details as possible (including the error &quot;
                                    + &quot;stack trace).&quot;, t);

            // Error objects should always be propogated.
            if (t instanceof Error) {
                throw (Error) t.fillInStackTrace();
            }
        }
        return c;
    }

    /**
     * Get the list of objects for a ResultSet. Please not that your resultset
     * MUST return columns in the right order. You can use getFieldNames() in
     * BaseObject to get the correct sequence.
     * 
     * @param results
     *            the ResultSet
     * @return the list of objects
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List resultSet2Objects(java.sql.ResultSet results)
            throws TorqueException {
        try {
            QueryDataSet qds = null;
            List rows = null;
            try {
                qds = new QueryDataSet(results);
                rows = getSelectResults(qds);
            } finally {
                if (qds != null) {
                    qds.close();
                }
            }

            return populateObjects(rows);
        } catch (SQLException e) {
            throw new TorqueException(e);
        } catch (DataSetException e) {
            throw new TorqueException(e);
        }
    }

    /**
     * Method to do inserts.
     * 
     * @param criteria
     *            object used to create the INSERT statement.
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static ObjectKey doInsert(Criteria criteria) throws TorqueException {
        return BaseMessageRowPeer.doInsert(criteria, (Connection) null);</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBody.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBody.html#432">432</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlags.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlags.html#685">685</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>                    MessageFlagsPeer.doUpdate((MessageFlags) this, con);
                }
            }

            alreadyInSave = false;
        }
    }

    private final SimpleKey[] pks = new SimpleKey[2];

    private final ComboKey comboPK = new ComboKey(pks);

    /**
     * Set the PrimaryKey with an ObjectKey
     * 
     * @param key
     */
    public void setPrimaryKey(ObjectKey key) throws TorqueException {
        SimpleKey[] keys = (SimpleKey[]) key.getValue();
        setMailboxId(((NumberKey) keys[0]).longValue());
        setUid(((NumberKey) keys[1]).longValue());
    }

    /**
     * Set the PrimaryKey using SimpleKeys.
     * 
     * @param mailboxId
     *            long
     * @param uid
     *            long
     */
    public void setPrimaryKey(long mailboxId, long uid) throws TorqueException {
        setMailboxId(mailboxId);
        setUid(uid);
    }

    /**
     * Set the PrimaryKey using a String.
     */
    public void setPrimaryKey(String key) throws TorqueException {
        setPrimaryKey(new ComboKey(key));
    }

    /**
     * returns an id that differentiates this object from others of its class.
     */
    public ObjectKey getPrimaryKey() {
        pks[0] = SimpleKey.keyFor(getMailboxId());
        pks[1] = SimpleKey.keyFor(getUid());
        return comboPK;
    }

    /**
     * Makes a copy of this object. It creates a new object filling in the
     * simple attributes. It then fills all the association collections and sets
     * the related objects to isNew=true.
     */
    public MessageFlags copy() throws TorqueException {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBody.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBody.html#432">432</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageRow.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageRow.html#1048">1048</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>                    ((MessageBody) collMessageBodys.get(i)).save(con);
                }
            }
            alreadyInSave = false;
        }
    }

    private final SimpleKey[] pks = new SimpleKey[2];

    private final ComboKey comboPK = new ComboKey(pks);

    /**
     * Set the PrimaryKey with an ObjectKey
     * 
     * @param key
     */
    public void setPrimaryKey(ObjectKey key) throws TorqueException {
        SimpleKey[] keys = (SimpleKey[]) key.getValue();
        setMailboxId(((NumberKey) keys[0]).longValue());
        setUid(((NumberKey) keys[1]).longValue());
    }

    /**
     * Set the PrimaryKey using SimpleKeys.
     * 
     * @param mailboxId
     *            long
     * @param uid
     *            long
     */
    public void setPrimaryKey(long mailboxId, long uid) throws TorqueException {
        setMailboxId(mailboxId);
        setUid(uid);
    }

    /**
     * Set the PrimaryKey using a String.
     */
    public void setPrimaryKey(String key) throws TorqueException {
        setPrimaryKey(new ComboKey(key));
    }

    /**
     * returns an id that differentiates this object from others of its class.
     */
    public ObjectKey getPrimaryKey() {
        pks[0] = SimpleKey.keyFor(getMailboxId());
        pks[1] = SimpleKey.keyFor(getUid());
        return comboPK;
    }

    /**
     * Makes a copy of this object. It creates a new object filling in the
     * simple attributes. It then fills all the association collections and sets
     * the related objects to isNew=true.
     */
    public MessageRow copy() throws TorqueException {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMailboxRowPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMailboxRowPeer.html#333">333</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.html#345">345</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>        return BaseMessageRowPeer.doSelectVillageRecords(criteria,
                (Connection) null);
    }

    /**
     * Grabs the raw Village records to be formed into objects. This method
     * should be used for transactions
     * 
     * @param criteria
     *            object used to create the SELECT statement.
     * @param con
     *            the connection to use
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List doSelectVillageRecords(Criteria criteria, Connection con)
            throws TorqueException {
        if (criteria.getSelectColumns().size() == 0) {
            addSelectColumns(criteria);
        }
        correctBooleans(criteria);

        setDbName(criteria);

        // BasePeer returns a List of Value (Village) arrays. The array
        // order follows the order columns were placed in the Select clause.
        if (con == null) {
            return BasePeer.doSelect(criteria);
        } else {
            return BasePeer.doSelect(criteria, con);
        }
    }

    /**
     * The returned List will contain objects of the default type or objects
     * that inherit from the default.
     * 
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List populateObjects(List records) throws TorqueException {
        List results = new ArrayList(records.size());

        // populate the object(s)
        for (int i = 0; i &lt; records.size(); i++) {
            Record row = (Record) records.get(i);
            results.add(MessageRowPeer.row2Object(row, 1, MessageRowPeer</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlags.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlags.html#383">383</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageRow.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageRow.html#807">807</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            return new Integer(getSize());
        }
        return null;
    }

    /**
     * Set a field in the object by field (Java) name.
     * 
     * @param name
     *            field name
     * @param value
     *            field value
     * @return True if value was set, false if not (invalid name / protected
     *         field).
     * @throws IllegalArgumentException
     *             if object type of value does not match field object type.
     * @throws TorqueException
     *             If a problem occures with the set[Field] method.
     */
    public boolean setByName(String name, Object value) throws TorqueException,
            IllegalArgumentException {
        if (name.equals(&quot;MailboxId&quot;)) {
            if (value == null || !(Long.class.isInstance(value))) {
                throw new IllegalArgumentException(
                        &quot;setByName: value parameter was null or not a Long object.&quot;);
            }
            setMailboxId(((Long) value).longValue());
            return true;
        }
        if (name.equals(&quot;Uid&quot;)) {
            if (value == null || !(Long.class.isInstance(value))) {
                throw new IllegalArgumentException(
                        &quot;setByName: value parameter was null or not a Long object.&quot;);
            }
            setUid(((Long) value).longValue());
            return true;
        }
        if (name.equals(&quot;InternalDate&quot;)) {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBody.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBody.html#229">229</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageHeader.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageHeader.html#291">291</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            return getValue();
        }
        return null;
    }

    /**
     * Set a field in the object by field (Java) name.
     * 
     * @param name
     *            field name
     * @param value
     *            field value
     * @return True if value was set, false if not (invalid name / protected
     *         field).
     * @throws IllegalArgumentException
     *             if object type of value does not match field object type.
     * @throws TorqueException
     *             If a problem occures with the set[Field] method.
     */
    public boolean setByName(String name, Object value) throws TorqueException,
            IllegalArgumentException {
        if (name.equals(&quot;MailboxId&quot;)) {
            if (value == null || !(Long.class.isInstance(value))) {
                throw new IllegalArgumentException(
                        &quot;setByName: value parameter was null or not a Long object.&quot;);
            }
            setMailboxId(((Long) value).longValue());
            return true;
        }
        if (name.equals(&quot;Uid&quot;)) {
            if (value == null || !(Long.class.isInstance(value))) {
                throw new IllegalArgumentException(
                        &quot;setByName: value parameter was null or not a Long object.&quot;);
            }
            setUid(((Long) value).longValue());
            return true;
        }
        if (name.equals(&quot;LineNumber&quot;)) {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBody.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBody.html#229">229</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlags.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlags.html#383">383</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            return Boolean.valueOf(getSeen());
        }
        return null;
    }

    /**
     * Set a field in the object by field (Java) name.
     * 
     * @param name
     *            field name
     * @param value
     *            field value
     * @return True if value was set, false if not (invalid name / protected
     *         field).
     * @throws IllegalArgumentException
     *             if object type of value does not match field object type.
     * @throws TorqueException
     *             If a problem occures with the set[Field] method.
     */
    public boolean setByName(String name, Object value) throws TorqueException,
            IllegalArgumentException {
        if (name.equals(&quot;MailboxId&quot;)) {
            if (value == null || !(Long.class.isInstance(value))) {
                throw new IllegalArgumentException(
                        &quot;setByName: value parameter was null or not a Long object.&quot;);
            }
            setMailboxId(((Long) value).longValue());
            return true;
        }
        if (name.equals(&quot;Uid&quot;)) {
            if (value == null || !(Long.class.isInstance(value))) {
                throw new IllegalArgumentException(
                        &quot;setByName: value parameter was null or not a Long object.&quot;);
            }
            setUid(((Long) value).longValue());
            return true;
        }
        if (name.equals(&quot;Answered&quot;)) {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBody.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBody.html#47">47</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageHeader.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageHeader.html#53">53</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>    public long getMailboxId() {
        return mailboxId;
    }

    /**
     * Set the value of MailboxId
     * 
     * @param v
     *            new value
     */
    public void setMailboxId(long v) throws TorqueException {

        if (this.mailboxId != v) {
            this.mailboxId = v;
            setModified(true);
        }

        if (aMessageRow != null &amp;&amp; !(aMessageRow.getMailboxId() == v)) {
            aMessageRow = null;
        }

    }

    /**
     * Get the Uid
     * 
     * @return long
     */
    public long getUid() {
        return uid;
    }

    /**
     * Set the value of Uid
     * 
     * @param v
     *            new value
     */
    public void setUid(long v) throws TorqueException {

        if (this.uid != v) {
            this.uid = v;
            setModified(true);
        }

        if (aMessageRow != null &amp;&amp; !(aMessageRow.getUid() == v)) {
            aMessageRow = null;
        }

    }

    /**
     * Get the LineNumber
     * 
     * @return int
     */
    public int getLineNumber() {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/SearchQuery.java</td><td>Apache JAMES Mailbox Manager Library</td><td><a href="./xref/org/apache/james/mailboxmanager/SearchQuery.html#1047">1047</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/SearchQuery.java</td><td>Apache JAMES Mailbox Manager Library</td><td><a href="./xref/org/apache/james/mailboxmanager/SearchQuery.html#1136">1136</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>        public final Flag getFlag() {
            return flag;
        }

        /**
         * Gets the test to be preformed.
         * 
         * @return the &lt;code&gt;BooleanOperator&lt;/code&gt;, not null
         */
        public final BooleanOperator getOperator() {
            return operator;
        }

        /**
         * @see java.lang.Object#hashCode()
         */
        // @Override
        public int hashCode() {
            final int PRIME = 31;
            int result = 1;
            result = PRIME * result + ((flag == null) ? 0 : flag.hashCode());
            result = PRIME * result
                    + ((operator == null) ? 0 : operator.hashCode());
            return result;
        }

        /**
         * @see java.lang.Object#equals(java.lang.Object)
         */
        // @Override
        public boolean equals(Object obj) {
            if (this == obj)
                return true;
            if (obj == null)
                return false;
            if (getClass() != obj.getClass())
                return false;
            final FlagCriterion other = (FlagCriterion) obj;</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.html#641">641</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.html#658">658</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>    public static Criteria buildSelectCriteria(MessageFlags obj) {
        Criteria criteria = new Criteria(DATABASE_NAME);
        criteria.add(MAILBOX_ID, obj.getMailboxId());
        criteria.add(UID, obj.getUid());
        criteria.add(ANSWERED, obj.getAnswered());
        criteria.add(DELETED, obj.getDeleted());
        criteria.add(DRAFT, obj.getDraft());
        criteria.add(FLAGGED, obj.getFlagged());
        criteria.add(RECENT, obj.getRecent());
        criteria.add(SEEN, obj.getSeen());
        return criteria;
    }

    /**
     * Retrieve a single object by pk
     * 
     * @param pk
     *            the primary key
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     * @throws NoRowsException
     *             Primary key was not found in database.
     * @throws TooManyRowsException
     *             Primary key was not found in database.
     */
    public static MessageFlags retrieveByPK(ObjectKey pk)</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.html#392">392</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageFlagsPeer.html#422">422</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>        BaseMessageRowPeer.doUpdate(criteria, (Connection) null);
    }

    /**
     * Method to do updates. This method is to be used during a transaction,
     * otherwise use the doUpdate(Criteria) method. It will take care of the
     * connection details internally.
     * 
     * @param criteria
     *            object containing data that is used to create the UPDATE
     *            statement.
     * @param con
     *            the connection to use
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static void doUpdate(Criteria criteria, Connection con)
            throws TorqueException {
        Criteria selectCriteria = new Criteria(DATABASE_NAME, 2);
        correctBooleans(criteria);

        selectCriteria.put(MAILBOX_ID, criteria.remove(MAILBOX_ID));

        selectCriteria.put(UID, criteria.remove(UID));

        setDbName(criteria);

        if (con == null) {
            BasePeer.doUpdate(selectCriteria, criteria);
        } else {
            BasePeer.doUpdate(selectCriteria, criteria, con);
        }
    }

    /**
     * Method to do deletes.
     * 
     * @param criteria
     *            object containing data that is used DELETE from database.
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static void doDelete(Criteria criteria) throws TorqueException {</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/mailboxmanager/torque/om/BaseMailboxRowPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMailboxRowPeer.html#742">742</a></td></tr><tr class="a"><td>org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.java</td><td>Apache JAMES Imap Torque Mailbox Manager</td><td><a href="./xref/org/apache/james/mailboxmanager/torque/om/BaseMessageBodyPeer.html#680">680</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>            return (MessageBody) v.get(0);
        }
    }

    /**
     * Retrieve a multiple objects by pk
     * 
     * @param pks
     *            List of primary keys
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List retrieveByPKs(List pks) throws TorqueException {
        Connection db = null;
        List retVal = null;
        try {
            db = Torque.getConnection(DATABASE_NAME);
            retVal = retrieveByPKs(pks, db);
        } finally {
            Torque.closeConnection(db);
        }
        return retVal;
    }

    /**
     * Retrieve a multiple objects by pk
     * 
     * @param pks
     *            List of primary keys
     * @param dbcon
     *            the connection to use
     * @throws TorqueException
     *             Any exceptions caught during processing will be rethrown
     *             wrapped into a TorqueException.
     */
    public static List retrieveByPKs(List pks, Connection dbcon)
            throws TorqueException {
        List objs = null;
        if (pks == null || pks.size() == 0) {
            objs = new LinkedList();
        } else {
            Criteria criteria = new Criteria();</pre></div></td></tr><table class="bodyTable"></p><p><table class="bodyTable"><tr class="a"><th>File</th><th>Project</th><th>Line</th></tr><tr class="b"><td>org/apache/james/imap/processor/imap4rev1/CopyProcessor.java</td><td>Apache JAMES IMAP Mailbox Processor function</td><td><a href="./xref/org/apache/james/imap/processor/imap4rev1/CopyProcessor.html#72">72</a></td></tr><tr class="a"><td>org/apache/james/imap/processor/imap4rev1/fetch/FetchProcessor.java</td><td>Apache JAMES IMAP Mailbox Processor function</td><td><a href="./xref/org/apache/james/imap/processor/imap4rev1/fetch/FetchProcessor.html#75">75</a></td></tr><tr class="b"><td colspan='3'><div class="source"><pre>                final long highVal;
                final long lowVal;
                if (useUids) {
                    highVal = idSet[i].getHighVal();
                    lowVal = idSet[i].getLowVal();
                } else {
                    highVal = session.getSelected().uid(
                            (int) idSet[i].getHighVal());
                    lowVal = session.getSelected().uid(
                            (int) idSet[i].getLowVal());
                }
                MessageRange messageSet = MessageRangeImpl.uidRange(lowVal,
                        highVal);
                final MailboxSession mailboxSession = ImapSessionUtils
                        .getMailboxSession(session);</pre></div></td></tr><table class="bodyTable"></p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2002-2008
    
          The Apache Software Foundation
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      _uacct = "UA-1384591-1";
      urchinTracker();
    </script>
  </body>
</html>
