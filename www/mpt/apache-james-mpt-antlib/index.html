<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>JAMES Mail Protocol Tester (MPT) - 
  Overview</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
          <meta name="author" content="
  Mail Protocol Tester AntLib" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="http://james.apache.org/mpt/index.html" id="bannerLeft">
    
                                            <img src="images/james-mpt-logo.gif" alt="" />
    
            </a>
                        <a href="http://www.apache.org/index.html" id="bannerRight">
    
                                            <img src="images/asf-logo-reduced.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
  
  
            <div class="xleft">
        Last Published: 07/07/2009
                      </div>
            <div class="xright">      <a href="../../../../../people.apache.org/www/james.apache.org/index.html">JAMES Project</a>
          |
          <a href="../../../../../people.apache.org/www/james.apache.org/server/index.html">Server</a>
          |
          <a href="../../../../../people.apache.org/www/james.apache.org/mailet/index.html">Mailets</a>
          |
          <a href="../../../../../people.apache.org/www/james.apache.org/jspf/index.html">jSPF</a>
          |
          <a href="../../../../../people.apache.org/www/james.apache.org/mime4j/index.html">Mime4J</a>
          |
          <a href="../../../../../people.apache.org/www/james.apache.org/jsieve/index.html">JSieve</a>
          |
          <a href="../../../../../people.apache.org/www/james.apache.org/postage/index.html">Postage</a>
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
  
  
                   <h5>MPT AntLib</h5>
        <ul>
              
    <li class="none">
              <strong>Overview</strong>
        </li>
              
    <li class="none">
              <a href="doap_apache-james-mpt-antlib.rdf">DOAP</a>
        </li>
          </ul>
          <h5>Project Documentation</h5>
        <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
              <a href="project-info.html">Project Information</a>
              </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
              <a href="project-reports.html">Project Reports</a>
              </li>
          </ul>
          <h5>Mail Protocol Tester</h5>
        <ul>
              
    <li class="none">
              <a href="http://james.apache.org/mpt/index.html">Overview</a>
        </li>
              
    <li class="none">
              <a href="../release-notes.html">Release Notes</a>
        </li>
              
    <li class="none">
              <a href="http://james.apache.org/mpt/main">Main Library</a>
        </li>
              
    <li class="none">
              <a href="http://james.apache.org/mpt/antlib">AntLib</a>
        </li>
              
    <li class="none">
              <a href="http://james.apache.org/mpt/app">Application</a>
        </li>
          </ul>
          <h5>Releases</h5>
        <ul>
              
    <li class="none">
              <a href="http://james.apache.org/mpt/0.1">0.1 Documentation</a>
        </li>
              
    <li class="none">
              <a href="http://james.apache.org/mpt/0.1/release-notes.html">0.1 Release Notes</a>
        </li>
          </ul>
          <h5>The Apache Software Foundation</h5>
        <ul>
              
    <li class="none">
              <a href="http://jakarta.apache.org/site/getinvolved.html">Get Involved</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/faq.html">FAQ</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/sponsorship.html">Sponsorship</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/contributing.html">Donations</a>
        </li>
              
    <li class="none">
              <a href="http://apache.org/foundation/thanks.html">Thanks</a>
        </li>
          </ul>
          <h5>Downloads</h5>
        <ul>
              
    <li class="none">
              <a href="../../../../../people.apache.org/www/james.apache.org/download.cgi">Stable releases</a>
        </li>
              
    <li class="none">
              <a href="../../../../../people.apache.org/www/james.apache.org/downloadunstable.cgi">Unstable releases</a>
        </li>
              
    <li class="none">
              <a href="http://people.apache.org/builds/james/nightly/">Nightly builds</a>
        </li>
          </ul>
                                       <a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
  
  
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

 


<a name="What is the Apache James MPT?"></a><div class="section"><h2>What is the Apache James MPT?</h2>
<p>
Apache James Mail Protocol Tester (MPT) is a library providing a framework for the 
scritable functional testing of ASCII based line protocols.</p>
<p>
An antlib defines a suite of extensions for <a href="http://ant.apache.org">Apache Ant</a>.
This antlib defines a suite of functional testing tools particularly suitable for 
use with ASCII based line protocols (as are common in mail).
</p>
</div>
<a name="Usage"></a><div class="section"><h2>Usage</h2>
<p>
See: 
</p>
<ul>
<li>Apache Ant <a href="http://ant.apache.org/manual/CoreTypes/antlib.html">manual</a></li>
<li><a href="http://www.onjava.com/pub/a/onjava/2006/08/09/ant-1-7-using-antlibs.html">Using AntLibs</a> (article)</li>
<li><a href="http://www.oracle.com/technology/pub/articles/bodewig_taskwriters.html">Ant 1.6 for Task Writers</a> (article)</li>
</ul>
</div>
<a name="Tasks"></a><div class="section"><h2>Tasks</h2>
<a name="mpt"></a><div class="section"><h3>mpt</h3>

Executes <a href="../main">MPT</a> scripts against a running independent server.
If these scripts require users then these can be added by script by using the <code>AddUser</code>
element.

<a name="Parameters"></a><div class="section"><h3>Parameters</h3>
<table class="bodyTable"> 
<tr class="a">
    <td><strong>Attribute</strong></td> <td><strong>Description</strong></td> <td><strong>Required</strong></td>
</tr> 
<tr class="b">
    <td>port</td> 
    <td>Port number that the scripts should be executed against</td> 
    <td>Yes</td>
</tr>
<tr class="a">
    <td>host</td> 
    <td>Host name or IP address of the server against which the scripts should be executed</td> 
    <td>No (Defaults to <code>127.0.0.1</code>)</td>
</tr> 
<tr class="b">
    <td>script</td> 
    <td>File containing a script to be executed. To execute multiple scripts, 
    use a <a href="#Any Resource Collection">Resource Collection</a></td> 
    <td>When no resource collections elements exist</td>
</tr> 
<tr class="a">
    <td>skip</td> 
    <td>Skips execution of scripts. For simple conditional execution.</td> 
    <td>No</td>
</tr> 
<tr class="b">
    <td>shabang</td> 
    <td>Optional server shabang will be substituted for first server response.</td> 
    <td>No</td>
</tr>
<tr class="a">
    <td>quiet</td> 
    <td>Optional boolean setting when true will suppress progress output.</td> 
    <td>No (defaults to false)</td>
</tr>
<tr class="b">
    <td>errorproperty</td> 
    <td>Optionally names a property which will be set (with error message) when test fails.
    When unset, the build will terminate when test fails.</td> 
    <td>No</td>
</tr>
</table>
</div>

<a name="Nested Elements"></a><div class="section"><h3>Nested Elements</h3>
<a name="Any Resource Collection"></a><div class="section"><h3>Any Resource Collection</h3>

<a href="http://ant.apache.org/manual/CoreTypes/resources.html#collection">Resource Collection</a>s
are used to specify a group of scripts to execute. When resource collections are set, attribute <code>
</code>

</div>
<a name="AddUser"></a><div class="section"><h3>AddUser</h3>

Allows scripted addition of any users required by the tests. 
The port can vary but the host is inherited.

<table class="bodyTable"> 
<tr class="a">
    <td><strong>Attribute</strong></td> <td><strong>Description</strong></td> <td><strong>Required</strong></td>
</tr> 
<tr class="b">
    <td>port</td> 
    <td>Port number that the user addition script should be executed against</td> 
    <td>Yes</td>
</tr>

<tr class="a">
    <td>passwd</td> 
    <td>Password to be set for user created. Will be passed to the script.</td> 
    <td>No</td>
</tr> 

<tr class="b">
    <td>user</td> 
    <td>Name of the user to be created. Will be passed to the script.</td> 
    <td>No</td>
</tr> 

<tr class="a">
    <td>script</td> 
    <td>File containing the user creation script</td> 
    <td>Either this attribute must be set, or the user addition script </td>
</tr> 
</table>
<p>
User addition scripts are typically short. As an alternative to the script attribute
(which specifies the file containing the script), the script text can be added directly
as text to the body of this element.
</p>
</div>
</div>
<a name="Examples"></a><div class="section"><h3>Examples</h3>
<div class="source"><pre>

&lt;project 
    name=&quot;tests&quot; 
    default=&quot;main&quot; 
    xmlns:mpt=&quot;antlib:org.apache.james.mpt.ant&quot;&gt;

    &lt;!-- Connect to port 10000 on localhost and run all scripts in src/test/resources/ --&gt;
    &lt;target name='ConnectToServerPort10000'&gt;
        &lt;mpt:mpt port='10000'&gt;
            &lt;fileset dir='src/test/resources/&gt;
               &lt;include name='**/*.mpt'/&gt;
            &lt;/fileset&gt;
        &lt;/mpt:mpt&gt;
    &lt;/target&gt;
    
    &lt;!-- 
    Connects to port 4001 on example.org then runs user addition script
    Then connects to port 143 on example.org and runs test script 'test.mpt'
    --&gt;
    &lt;target name='ConnectToExampleDotOrgPort143'&gt;
        &lt;mpt:mpt port='143' host='example.org' script='test.mpt'&gt;
            &lt;!-- Add users by running 'Add User &quot;${user}&quot; &quot;${passwd}&quot;' --&gt;
            &lt;addUser port='4001' user='user' passwd='passwd'&gt;C: Add User &quot;${user}&quot; &quot;${passwd}&quot;&lt;/addUser&gt;
        &lt;/mpt:mpt&gt;
    &lt;/target&gt;
&lt;/project&gt;

</pre></div>
</div>
</div>
</div>


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2008-2009
    
          The Apache Software Foundation
          
  

  
    
  
  
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      _uacct = "UA-1384591-1";
      urchinTracker();
    </script>
  </body>
</html>
