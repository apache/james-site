<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.    
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at 2016-02-05 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>JAMES Mail Protocol Tester (MPT) - 
  Overview</title>
    <style type="text/css" media="all">
      @import url("./css/james.css");
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
      @import url("./js/jquery/css/custom-theme/jquery-ui-1.8.5.custom.css");
      @import url("./js/jquery/css/print.css");
      @import url("./js/fancybox/jquery.fancybox-1.3.4.css");
    </style>
    <script type="text/javascript" src="./js/jquery/js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="./js/jquery/js/jquery-ui-1.8.5.custom.min.js"></script>
    <script type="text/javascript" src="./js/fancybox/jquery.fancybox-1.3.4.js"></script>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Mail Protocol Tester AntLib" />
    <meta name="Date-Revision-yyyymmdd" content="20160205" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link title="DOAP" rel="meta" type="application/rdf+xml" href="http://james.apache.org//doap_james-project.rdf"/>
                      
          <!-- Google Analytics -->
    <script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1384591-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script').item(0); s.parentNode.insertBefore(ga, s);
      })();

    </script>
    </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../index.html" id="bannerLeft" title="james-mpt-logo.gif">
              
                                                                            
        <img src="images/logos/james-mpt-logo.gif" alt="JAMES MPT" />
                </a>
                              <a href="http://www.apache.org/index.html" id="bannerRight">
              
                                        
        <img src="images/logos/asf-logo-reduced.gif" alt="The Apache Software Foundation" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 2016-02-05</span>
                      </div>
            <div class="xright">                    <a href="../../index.html" title="Home">Home</a>
            |
                        <a href="../../server/index.html" title="Server">Server</a>
            |
                        <a href="../../hupa/index.html" title="Hupa">Hupa</a>
            |
                        <a href="../../protocols/index.html" title="Protocols">Protocols</a>
            |
                        <a href="../../mailet/index.html" title="Mailets">Mailets</a>
            |
                        <a href="../../mailbox/index.html" title="Mailbox">Mailbox</a>
            |
                        <a href="../../mime4j/index.html" title="Mime4J">Mime4J</a>
            |
                        <a href="../../jsieve/index.html" title="jSieve">jSieve</a>
            |
                        <a href="../../jspf/index.html" title="jSPF">jSPF</a>
            |
                        <a href="../../jdkim/index.html" title="jDKIM">jDKIM</a>
            |
                        <a href="../index.html" title="MPT">MPT</a>
            |
                        <a href="../../postage/index.html" title="Postage">Postage</a>
              
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Apache James MPT">Apache James MPT</a>
            </li>
          </ul>
                       <h5>MPT AntLib</h5>
                  <ul>
                  <li class="none">
            <strong>Overview</strong>
          </li>
                  <li class="none">
                                        <a href="doap_apache-james-mpt-antlib.rdf" title="DOAP">                                              <img class="imageLink" src="http://www.w3.org/RDF/icons/rdf_metadata_button.32" alt=""/>
  DOAP</a>
                      </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                      <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                       <h5>Mail Protocol Tester</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../release-notes.html" title="Release Notes">Release Notes</a>
            </li>
                  <li class="none">
                          <a href="../main" title="Main Library">Main Library</a>
            </li>
                  <li class="none">
                          <a href="./" title="AntLib">AntLib</a>
            </li>
                  <li class="none">
                          <a href="../app" title="Application">Application</a>
            </li>
          </ul>
                       <h5>Releases</h5>
                  <ul>
                  <li class="none">
                          <a href="../0.1" title="0.1 Documentation">0.1 Documentation</a>
            </li>
                  <li class="none">
                          <a href="../0.1/release-notes.html" title="0.1 Release Notes">0.1 Release Notes</a>
            </li>
          </ul>
                       <h5>About James</h5>
                  <ul>
                  <li class="none">
                          <a href="../../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../../newsarchive.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../../mail.html" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="../../contribute.html" title="Contributing">Contributing</a>
            </li>
                  <li class="none">
                          <a href="../../guidelines.html" title="Guidelines">Guidelines</a>
            </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/james" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../../team-list.html" title="Who We Are">Who We Are</a>
            </li>
                  <li class="none">
                          <a href="../../license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>Download</h5>
                  <ul>
                  <li class="none">
                          <a href="../../download.cgi" title="Releases">Releases</a>
            </li>
          </ul>
        <h5>Apache Software Foundation</h5>
  <ul>
    <li>
      <strong>
        <a title="ASF" href="http://www.apache.org/">ASF</a>
      </strong>
    </li>
    <li>
      <a title="Get Involved" href="http://www.apache.org/foundation/getinvolved.html">Get Involved</a>
    </li>
    <li>
      <a title="FAQ" href="http://www.apache.org/foundation/faq.html">FAQ</a>
    </li>
    <li>
      <a title="License" href="http://www.apache.org/licenses/" >License</a>
    </li>
    <li>
      <a title="Sponsorship" href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
    </li>
    <li>
      <a title="Thanks" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
    </li>
    <li>
      <a title="Security" href="http://www.apache.org/security/">Security</a>
    </li>
  </ul>
                       <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License. -->

 
<div class="section">
<h2>What is the Apache James MPT?<a name="What_is_the_Apache_James_MPT"></a></h2>

<p>
Apache James Mail Protocol Tester (MPT) is a library providing a framework for the 
scritable functional testing of ASCII based line protocols.</p>

<p>
An antlib defines a suite of extensions for <a class="externalLink" href="http://ant.apache.org">Apache Ant</a>.
This antlib defines a suite of functional testing tools particularly suitable for 
use with ASCII based line protocols (as are common in mail).
</p>
</div>

<div class="section">
<h2>Usage<a name="Usage"></a></h2>

<p>
See: 
</p>

<ul>

<li>Apache Ant <a class="externalLink" href="http://ant.apache.org/manual/CoreTypes/antlib.html">manual</a></li>

<li><a class="externalLink" href="http://www.onjava.com/pub/a/onjava/2006/08/09/ant-1-7-using-antlibs.html">Using AntLibs</a> (article)</li>

<li><a class="externalLink" href="http://www.oracle.com/technology/pub/articles/bodewig_taskwriters.html">Ant 1.6 for Task Writers</a> (article)</li>
</ul>
</div>

<div class="section">
<h2>Tasks<a name="Tasks"></a></h2>

<div class="section">
<h3>mpt<a name="mpt"></a></h3>

<p>
Executes <a href="../main">MPT</a> scripts against a running independent server.
If these scripts require users then these can be added by script by using the <tt>AddUser</tt>
element.
</p>
</div>
<div class="section">
<h3>Parameters<a name="Parameters"></a></h3>

<table border="0" class="bodyTable"> 

<tr class="a">
    
<td><b>Attribute</b></td> 
<td><b>Description</b></td> 
<td><b>Required</b></td>
</tr> 

<tr class="b">
    
<td>port</td> 
    
<td>Port number that the scripts should be executed against</td> 
    
<td>Yes</td>
</tr>

<tr class="a">
    
<td>host</td> 
    
<td>Host name or IP address of the server against which the scripts should be executed</td> 
    
<td>No (Defaults to <tt>127.0.0.1</tt>)</td>
</tr> 

<tr class="b">
    
<td>script</td> 
    
<td>File containing a script to be executed. To execute multiple scripts, 
    use a <a href="#Any_Resource_Collection">Resource Collection</a></td> 
    
<td>When no resource collections elements exist</td>
</tr> 

<tr class="a">
    
<td>skip</td> 
    
<td>Skips execution of scripts. For simple conditional execution.</td> 
    
<td>No</td>
</tr> 

<tr class="b">
    
<td>shabang</td> 
    
<td>Optional server shabang will be substituted for first server response.</td> 
    
<td>No</td>
</tr>

<tr class="a">
    
<td>quiet</td> 
    
<td>Optional boolean setting when true will suppress progress output.</td> 
    
<td>No (defaults to false)</td>
</tr>

<tr class="b">
    
<td>errorproperty</td> 
    
<td>Optionally names a property which will be set (with error message) when test fails.
    When unset, the build will terminate when test fails.</td> 
    
<td>No</td>
</tr>
</table>
</div>


<div class="section">
<h3>Nested Elements<a name="Nested_Elements"></a></h3>
</div>
<div class="section">
<h3>Any Resource Collection<a name="Any_Resource_Collection"></a></h3>

<p>
<a class="externalLink" href="http://ant.apache.org/manual/CoreTypes/resources.html#collection">Resource Collection</a>s
are used to specify a group of scripts to execute. When resource collections are set, attribute <tt>
</tt>
</p>
</div>

<div class="section">
<h3>AddUser<a name="AddUser"></a></h3>

<p>
Allows scripted addition of any users required by the tests. 
The port can vary but the host is inherited.
</p>

<table border="0" class="bodyTable"> 

<tr class="a">
    
<td><b>Attribute</b></td> 
<td><b>Description</b></td> 
<td><b>Required</b></td>
</tr> 

<tr class="b">
    
<td>port</td> 
    
<td>Port number that the user addition script should be executed against</td> 
    
<td>Yes</td>
</tr>


<tr class="a">
    
<td>passwd</td> 
    
<td>Password to be set for user created. Will be passed to the script.</td> 
    
<td>No</td>
</tr> 


<tr class="b">
    
<td>user</td> 
    
<td>Name of the user to be created. Will be passed to the script.</td> 
    
<td>No</td>
</tr> 


<tr class="a">
    
<td>script</td> 
    
<td>File containing the user creation script</td> 
    
<td>Either this attribute must be set, or the user addition script </td>
</tr> 
</table>

<p>
User addition scripts are typically short. As an alternative to the script attribute
(which specifies the file containing the script), the script text can be added directly
as text to the body of this element.
</p>
</div>


<div class="section">
<h3>Examples<a name="Examples"></a></h3>

<div class="source">
<pre>

&lt;project 
    name=&quot;tests&quot; 
    default=&quot;main&quot; 
    xmlns:mpt=&quot;antlib:org.apache.james.mpt.ant&quot;&gt;

    &lt;!-- Connect to port 10000 on localhost and run all scripts in src/test/resources/ --&gt;
    &lt;target name='ConnectToServerPort10000'&gt;
        &lt;mpt:mpt port='10000'&gt;
            &lt;fileset dir='src/test/resources/&gt;
               &lt;include name='**/*.mpt'/&gt;
            &lt;/fileset&gt;
        &lt;/mpt:mpt&gt;
    &lt;/target&gt;
    
    &lt;!-- 
    Connects to port 4001 on example.org then runs user addition script
    Then connects to port 143 on example.org and runs test script 'test.mpt'
    --&gt;
    &lt;target name='ConnectToExampleDotOrgPort143'&gt;
        &lt;mpt:mpt port='143' host='example.org' script='test.mpt'&gt;
            &lt;!-- Add users by running 'Add User &quot;${user}&quot; &quot;${passwd}&quot;' --&gt;
            &lt;addUser port='4001' user='user' passwd='passwd'&gt;C: Add User &quot;${user}&quot; &quot;${passwd}&quot;&lt;/addUser&gt;
        &lt;/mpt:mpt&gt;
    &lt;/target&gt;
&lt;/project&gt;

</pre></div>
</div>

</div>


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                    2008-2016
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
