<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Distributed James Server &mdash; Extending server behavior :: Apache James</title>
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://james.apache.org"><img src="/_/img/james.svg" alt="james logo"> Apache James</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>James server</strong></div>
            <a class="navbar-item" href="https://github.com/apache/james-project">Repository</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/projects/JAMES/issues">Issue Tracker</a>
            <hr class="navbar-divider">
            <a class="navbar-item" href="https://james.apache.org/mime4j/index.html">Mime4J</a>
            <a class="navbar-item" href="https://james.apache.org/jsieve/index.html">jSieve</a>
            <a class="navbar-item" href="https://james.apache.org/jspf/index.html">jSPF</a>
            <a class="navbar-item" href="https://james.apache.org/jdkim/index.html">jDKIM</a>
            <a class="navbar-item" href="https://james.apache.org/hupa/index.html">HUPA</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
             <!-- Not ideal but dropping the version in the href requires tweaking james-projet docs module first -->
            <a class="navbar-item" href="/james-project/3.6.0/community/mailing-lists.html">Mailing lists</a>
            <a class="navbar-item" href="https://gitter.im/apache/james-project"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="logo-gitter-sign" data-v-44ebcb1a=""><rect x="15" y="5" width="2" height="10"></rect> <rect x="10" y="5" width="2" height="20"></rect> <rect x="5" y="5" width="2" height="20"></rect> <rect width="2" height="15"></rect></svg> Gitter</a>
            <a class="navbar-item" href="https://twitter.com/ApacheJames">
              <span class="icon">
                <svg aria-hidden="true" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                  <path fill="#57aaee" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
                </svg>
              </span> Twitter
            </a>            
            <a class="navbar-item" href="#">  <svg class="octicon octicon-mark-github v-align-middle" viewBox="0 0 16 16" version="1.1" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> Github</a>
          </div>
        </div>
<!--        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="james-distributed-app" data-version="3.8.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Apache James Distributed Server</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Distributed James Application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../objectives.html">Objectives and motivation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../architecture/index.html">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/implemented-standards.html">Implemented standards</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/consistency-model.html">Consistency Model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../architecture/specialized-instances.html">Specialized instances</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../run/index.html">Run</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../run/run-java.html">Run with Java</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../run/run-docker.html">Run with Docker</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../run/run-kubernetes.html">Run with Kubernetes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../run/k8s-checklist.html">Deployment Checklist</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../run/k8s-logsMetrics.html">Logs &amp; Metrics</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../run/k8s-values.html">values.yaml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../run/k8s-secrets.html">secrets.yaml</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../configure/index.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Protocols</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/imap.html">imapserver.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/jmap.html">jmap.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/jmx.html">jmx.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/smtp.html">smtpserver.xml &amp; lmtpserver.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/smtp-hooks.html">Packaged SMTP hooks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/pop3.html">pop3server.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/webadmin.html">webadmin.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/ssl.html">SSL &amp; TLS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/sieve.html">Sieve &amp; ManageSieve</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Storage dependencies</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/blobstore.html">blobstore.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/cassandra.html">cassandra.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/opensearch.html">opensearch.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/rabbitmq.html">rabbitmq.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/redis.html">redis.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/tika.html">tika.properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/batchsizes.html">batchsizes.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/dns.html">dnsservice.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/domainlist.html">domainlist.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/healthcheck.html">healthcheck.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/mailetcontainer.html">mailetcontainer.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/mailets.html">Packaged Mailets</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/matchers.html">Packaged Matchers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/mailrepositorystore.html">mailrepositorystore.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/recipientrewritetable.html">recipientrewritetable.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/search.html">search.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/usersrepository.html">usersrepository.xml</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/vault.html">deletedMessageVault.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/extensions.html">extensions.properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/listeners.html">listeners.xml</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/spam.html">Anti-Spam setup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/remote-delivery-error-handling.html">About RemoteDelivery error handling</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/collecting-contacts.html">Contact collection</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/collecting-events.html">Event collection</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../configure/dsn.html">ESMTP DSN support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../operate/index.html">Operate</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/guide.html">Operator guide</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/performanceChecklist.html">Performance checklist</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/webadmin.html">WebAdmin REST administration API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/metrics.html">Metrics</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/migrating.html">Migrating existing data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/cli.html">Command Line Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/cassandra-migration.html">Cassandra migration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operate/security.html">Security checklist</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Extending server behavior</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mail-processing.html">Custom mail processing components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mailbox-listeners.html">Custom Mailbox Listeners</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="smtp-hooks.html">Custom SMTP hooks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webadmin-routes.html">Custom WebAdmin routes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="imap.html">Custom IMAP processing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../benchmark/index.html">Performance benchmark</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../benchmark/db-benchmark.html">Database benchmarks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../benchmark/james-benchmark.html">James benchmarks</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Apache James Distributed Server</span>
    <span class="version">3.8.1 SNAPSHOT</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">Apache James Distributed Server</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">3.8.1 SNAPSHOT</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../james-project/3.8.1/index.html">Apache James Server</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../james-project/3.8.1/index.html">3.8.1 SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../../james-project/3.6.0/index.html">3.6.0 Snapshot</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../james-site/latest/index.html">Apache James Site</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../james-site/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../james-site/latest/homepage.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Apache James Distributed Server</a></li>
    <li><a href="../index.html">Distributed James Application</a></li>
    <li><a href="index.html">Extending server behavior</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/apache/james-project/blob/master/server/apps/distributed-app/docs/modules/ROOT/pages/extending/index.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Distributed James Server &mdash; Extending server behavior</h1>
<div class="sect1">
<h2 id="_available_extension_mechanisms"><a class="anchor" href="#_available_extension_mechanisms"></a>Available extension mechanisms</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="../_images/james-hexagons-extensions.png" alt="Extension mechanisms for the Distributed Server">
</div>
</div>
<div class="paragraph">
<p>The Distributed Server exposes several interfaces allowing the user to write custom extensions in
order to extend the Distributed Server behavior.</p>
</div>
<div class="paragraph">
<p>Writing <strong>Mailets</strong> and <strong>Matchers</strong> allows one to supply custom components for the
<a href="mail-processing.html" class="xref page">Mail Processing</a> and
enables to take decisions, and implement your business logic at the transport level.</p>
</div>
<div class="paragraph">
<p>Writing <a href="mailbox-listeners.html" class="xref page">Mailbox listeners</a> enables to
react to your user interaction with their mailbox. This powerful tool allows build advanced features
for mail delivery servers.</p>
</div>
<div class="paragraph">
<p>Writing <a href="smtp-hooks.html" class="xref page">SMTP hookd</a> enables to
add features to your SMTP server.</p>
</div>
<div class="paragraph">
<p>Writing <a href="webadmin-routes.html" class="xref page">WebAdmin routes</a> enables to
add features to the WebAdmin REST API.</p>
</div>
<div class="paragraph">
<p>Writing <a href="imap.html" class="xref page">IMAP extensions</a>.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/apache/james-project/tree/master/examples">examples</a> are also a good reference.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_injections_for_your_extensions"><a class="anchor" href="#_handling_injections_for_your_extensions"></a>Handling injections for your extensions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_injecting_core_components"><a class="anchor" href="#_injecting_core_components"></a>Injecting core components</h3>
<div class="paragraph">
<p>You can very easily inject core components into your custom extensions.</p>
</div>
<div class="paragraph">
<p>All you need is to pass them via a constructor annotated via <strong>@Inject</strong>.</p>
</div>
<div class="paragraph">
<p>For instance:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public class MyMailet extends GenericMailet {
    private final UsersRepository usersRepository;

    @Inject
    public MyMailet(UsersRepository usersRepository) {
        this.usersRepository = usersRepository;
    }

    @Override
    public void service(Mail mail) throws MessagingException {
        // Do something
    }
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_injecting_simple_extension_components"><a class="anchor" href="#_injecting_simple_extension_components"></a>Injecting simple extension components</h3>
<div class="paragraph">
<p>Furthermore, concrete implementation, that are part of your extension, can be injected as well.</p>
</div>
<div class="paragraph">
<p>Consider the following example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public class MyService {

}

public class MyMailet extends GenericMailet {
    private final MyService myService;

    @Inject
    public MyMailet(MyService myService) {
        this.usersRepository = myService;
    }

    @Override
    public void service(Mail mail) throws MessagingException {
        // Do something
    }
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_custom_injections_for_your_extensions"><a class="anchor" href="#_defining_custom_injections_for_your_extensions"></a>Defining custom injections for your extensions</h3>
<div class="paragraph">
<p>However, to inject an interface into your extension, you will need additional injection definitions.</p>
</div>
<div class="paragraph">
<p>To so:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1. Given an interface defined in an additional JAR:</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>public interface MyService {}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>2. And an implementation of that interface, in another additional JAR:</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>public class MyServiceImpl extends MyService {}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>3. We need to define a binding for MyService to be bound to MyServiceImpl</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>public class MyServiceModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(MyServiceImpl.class).in(Scopes.SINGLETON);
        bind(MyService.class).to(MyServiceImpl.class);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Both <strong>MyService</strong>, <strong>MyServiceImpl</strong> and <strong>MyServiceModule</strong> needs to be in the <strong>extensions-jars</strong>
folder (potentially different jars).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>4. <strong>MyServiceModule</strong> needs to be registered in <a href="../configure/extensions.html" class="xref page"><strong>extensions.properties</strong></a></p>
</li>
<li>
<p>5. <strong>MyService</strong> can then be used as part of your extensions</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>public class MyMailet extends GenericMailet {
    private final MyService myService;

    @Inject
    public MyMailet(MyService myService) {
        this.usersRepository = myService;
    }

    @Override
    public void service(Mail mail) throws MessagingException {
        // Do something
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note that overriding injection definitions of the Distributed Server for your injections is not supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="_starting_your_components"><a class="anchor" href="#_starting_your_components"></a>Starting your components</h3>
<div class="paragraph">
<p>Sometimes you wish to 'start' your extensions. This can be achieved through defining your own <code>UserDefinedStartable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">public class MyStartable implements UserDefinedStartable {
    @Override
    public void start() {
        // Will be called
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your startable then needs to be registered within <code>extensions.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">guice.extension.startable=com.company.MyStartable</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pre_packaged_extensions"><a class="anchor" href="#_pre_packaged_extensions"></a>Pre-packaged extensions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rate_limiting_for_mailet_processing"><a class="anchor" href="#_rate_limiting_for_mailet_processing"></a>Rate Limiting for mailet processing</h3>
<div class="paragraph">
<p><strong>Vendor</strong>: Apache Foundation (James project), Apache License V2</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/apache/james-project/tree/master/server/mailet/rate-limiter">Project link</a> contains detailed set
up instructions and configuration examples as well as a pre-configured docker-compose.</p>
</div>
<div class="paragraph">
<p>This extension ships mailets for applying advanced rate limit criteria to the email transiting through your James server.
It is shipped with two backends implemented:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>in memory</strong>: For single server mode.</p>
</li>
<li>
<p><strong>Redis</strong>: Uses <a href="https://redis.io/">Redis</a> as a shared, fast and scalable in-memory datastore, allowing to apply rate
limiting in a distributed fashion. Here is the <a href="https://github.com/apache/james-project/tree/master/server/mailet/rate-limiter">link</a> to the Redis extension for rate limiting.</p>
</li>
<li>
<p>Alternative extensions can be written and loaded into James using the <a href="#_handling_injections_for_your_extensions">Guice extension mechanism</a>
and providing custom injections for the <code>RateLimiterFactoryProvider</code> class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This extension ships the following mailets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PerSenderRateLimit</code> allows defining limits applied to the senders of emails (count of email, count of recipients,
size, size * recipients)</p>
</li>
<li>
<p><code>PerRecipientRateLimit</code> allows defining limits applied to the recipients of emails (count of email, size)</p>
</li>
<li>
<p><code>GlobalRateLimit</code> allows defining limits applied to all the emails (count of email, count of recipients,
size, size * recipients)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on their positions and the matcher they are being combined with, those rate limiting rules could be applied to
submitted emails, received emails or emitted email being relayed to third parties.</p>
</div>
<div class="sect3">
<h4 id="_throttling"><a class="anchor" href="#_throttling"></a>Throttling</h4>
<div class="paragraph">
<p>Can use combine with <code>Requeue</code> mailet for a throttler by re-enqueue mail.
<a href="https://github.com/apache/james-project/tree/master/server/mailet/rate-limiter#throttling">link</a></p>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>