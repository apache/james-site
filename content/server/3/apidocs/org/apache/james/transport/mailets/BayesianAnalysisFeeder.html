<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_04-ea) on Sun Apr 29 18:11:33 CEST 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>BayesianAnalysisFeeder (Apache James Server 3.0-beta5-SNAPSHOT API)</title>
<meta name="date" content="2012-04-29">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BayesianAnalysisFeeder (Apache James Server 3.0-beta5-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BayesianAnalysisFeeder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysis.html" title="class in org.apache.james.transport.mailets"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/james/transport/mailets/Bounce.html" title="class in org.apache.james.transport.mailets"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/james/transport/mailets/BayesianAnalysisFeeder.html" target="_top">Frames</a></li>
<li><a href="BayesianAnalysisFeeder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.james.transport.mailets</div>
<h2 title="Class BayesianAnalysisFeeder" class="title">Class BayesianAnalysisFeeder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.mailet.base.GenericMailet</li>
<li>
<ul class="inheritance">
<li>org.apache.james.transport.mailets.BayesianAnalysisFeeder</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.mailet.Mailet, org.apache.mailet.MailetConfig</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BayesianAnalysisFeeder</span>
extends org.apache.mailet.base.GenericMailet</pre>
<div class="block"><p>
 Feeds ham OR spam messages to train the <a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysis.html" title="class in org.apache.james.transport.mailets"><code>BayesianAnalysis</code></a> mailet.
 </p>
 
 <p>
 The new token frequencies will be stored in a JDBC database.
 </p>
 
 <p>
 Sample configuration:
 </p>
 
 <pre>
 <code>
 &lt;processor name="root"&gt;
 
   &lt;mailet match="RecipientIs=not.spam@thisdomain.com" class="BayesianAnalysisFeeder"&gt;
     &lt;repositoryPath&gt; db://maildb &lt;/repositoryPath&gt;
     &lt;feedType&gt;ham&lt;/feedType&gt;
     &lt;!--
       Set this to the maximum message size (in bytes) that a message may have
       to be analyzed (default is 100000).
     --&gt;
     &lt;maxSize&gt;100000&lt;/maxSize&gt;
   &lt;/mailet&gt;
 
   &lt;mailet match="RecipientIs=spam@thisdomain.com" class="BayesianAnalysisFeeder"&gt;
     &lt;repositoryPath&gt; db://maildb &lt;/repositoryPath&gt;
     &lt;feedType&gt;spam&lt;/feedType&gt;
     &lt;!--
       Set this to the maximum message size (in bytes) that a message may have
       to be analyzed (default is 100000).
     --&gt;
     &lt;maxSize&gt;100000&lt;/maxSize&gt;
   &lt;/mailet&gt;
 
 &lt;processor&gt;
 </code>
 </pre>
 
 <p>
 The previous example will allow the user to send messages to the server and
 use the recipient email address as the indicator for whether the message is
 ham or spam.
 </p>
 
 <p>
 Using the example above, send good messages (ham not spam) to the email
 address "not.spam@thisdomain.com" to pump good messages into the feeder, and
 send spam messages (spam not ham) to the email address "spam@thisdomain.com"
 to pump spam messages into the feeder.
 </p>
 
 <p>
 The bayesian database tables will be updated during the training reflecting
 the new data
 </p>
 
 <p>
 At the end the mail will be destroyed (ghosted).
 </p>
 
 <p>
 <b>The correct approach is to send the original ham/spam message as an
 attachment to another message sent to the feeder; all the headers of the
 enveloping message will be removed and only the original message's tokens
 will be analyzed.</b>
 </p>
 
 <p>
 After a training session, the frequency <i>Corpus</i> used by
 <code>BayesianAnalysis</code> must be rebuilt from the database, in order to
 take advantage of the new token frequencies. Every 10 minutes a special
 thread in the <code>BayesianAnalysis</code> mailet will check if any change
 was made to the database, and rebuild the corpus if necessary.
 </p>
 
 <p>
 Only one message at a time is scanned (the database update activity is
 <i>synchronized</i>) in order to avoid too much database locking, as
 thousands of rows may be updated just for one message fed.
 </p></div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>2.3.0</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysis.html" title="class in org.apache.james.transport.mailets"><code>BayesianAnalysis</code></a>, 
<a href="../../../../../org/apache/james/util/bayesian/BayesianAnalyzer.html" title="class in org.apache.james.util.bayesian"><code>BayesianAnalyzer</code></a>, 
<a href="../../../../../org/apache/james/util/bayesian/JDBCBayesianAnalyzer.html" title="class in org.apache.james.util.bayesian"><code>JDBCBayesianAnalyzer</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#BayesianAnalysisFeeder()">BayesianAnalysisFeeder</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#getMailetInfo()">getMailetInfo</a></strong>()</code>
<div class="block">Return a string describing this mailet.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#getMaxSize()">getMaxSize</a></strong>()</code>
<div class="block">Getter for property maxSize.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#init()">init</a></strong>()</code>
<div class="block">Mailet initialization routine.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#service(org.apache.mailet.Mail)">service</a></strong>(org.apache.mailet.Mail&nbsp;mail)</code>
<div class="block">Scans the mail and updates the token frequencies in the database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#setDataSource(javax.sql.DataSource)">setDataSource</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/javax/sql/DataSource.html?is-external=true" title="class or interface in javax.sql">DataSource</a>&nbsp;datasource)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#setFileSystem(org.apache.james.filesystem.api.FileSystem)">setFileSystem</a></strong>(<a href="../../../../../org/apache/james/filesystem/api/FileSystem.html" title="interface in org.apache.james.filesystem.api">FileSystem</a>&nbsp;fs)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysisFeeder.html#setMaxSize(int)">setMaxSize</a></strong>(int&nbsp;maxSize)</code>
<div class="block">Setter for property maxSize.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.mailet.base.GenericMailet">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.mailet.base.GenericMailet</h3>
<code>arrayToString, checkInitParameters, destroy, getInitParameter, getInitParameter, getInitParameter, getInitParameterNames, getMailetConfig, getMailetContext, getMailetName, init, log, log</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BayesianAnalysisFeeder()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BayesianAnalysisFeeder</h4>
<pre>public&nbsp;BayesianAnalysisFeeder()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getMailetInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMailetInfo</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getMailetInfo()</pre>
<div class="block">Return a string describing this mailet.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>getMailetInfo</code>&nbsp;in interface&nbsp;<code>org.apache.mailet.Mailet</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>getMailetInfo</code>&nbsp;in class&nbsp;<code>org.apache.mailet.base.GenericMailet</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a string describing this mailet</dd></dl>
</li>
</ul>
<a name="getMaxSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSize</h4>
<pre>public&nbsp;int&nbsp;getMaxSize()</pre>
<div class="block">Getter for property maxSize.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Value of property maxSize.</dd></dl>
</li>
</ul>
<a name="setDataSource(javax.sql.DataSource)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDataSource</h4>
<pre>public&nbsp;void&nbsp;setDataSource(<a href="http://download.oracle.com/javase/6/docs/api/javax/sql/DataSource.html?is-external=true" title="class or interface in javax.sql">DataSource</a>&nbsp;datasource)</pre>
</li>
</ul>
<a name="setMaxSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxSize</h4>
<pre>public&nbsp;void&nbsp;setMaxSize(int&nbsp;maxSize)</pre>
<div class="block">Setter for property maxSize.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maxSize</code> - New value of property maxSize.</dd></dl>
</li>
</ul>
<a name="setFileSystem(org.apache.james.filesystem.api.FileSystem)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFileSystem</h4>
<pre>public&nbsp;void&nbsp;setFileSystem(<a href="../../../../../org/apache/james/filesystem/api/FileSystem.html" title="interface in org.apache.james.filesystem.api">FileSystem</a>&nbsp;fs)</pre>
</li>
</ul>
<a name="init()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init()
          throws javax.mail.MessagingException</pre>
<div class="block">Mailet initialization routine.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>init</code>&nbsp;in class&nbsp;<code>org.apache.mailet.base.GenericMailet</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.mail.MessagingException</code> - if a problem arises</dd></dl>
</li>
</ul>
<a name="service(org.apache.mailet.Mail)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>service</h4>
<pre>public&nbsp;void&nbsp;service(org.apache.mailet.Mail&nbsp;mail)</pre>
<div class="block">Scans the mail and updates the token frequencies in the database.
 
 The method is synchronized in order to avoid too much database locking,
 as thousands of rows may be updated just for one message fed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>service</code>&nbsp;in interface&nbsp;<code>org.apache.mailet.Mailet</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code>service</code>&nbsp;in class&nbsp;<code>org.apache.mailet.base.GenericMailet</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>mail</code> - The Mail message to be scanned.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BayesianAnalysisFeeder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/james/transport/mailets/BayesianAnalysis.html" title="class in org.apache.james.transport.mailets"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/james/transport/mailets/Bounce.html" title="class in org.apache.james.transport.mailets"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/james/transport/mailets/BayesianAnalysisFeeder.html" target="_top">Frames</a></li>
<li><a href="BayesianAnalysisFeeder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2002-2012 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</small></p>
</body>
</html>
