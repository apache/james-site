<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_16) on Thu Jun 25 13:08:58 CEST 2009 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
RFC4408SPF1Parser (Apache JAMES jSPF Resolver 0.9.8-SNAPSHOT API)
</TITLE>

<META NAME="keywords" CONTENT="org.apache.james.jspf.parser.RFC4408SPF1Parser class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="RFC4408SPF1Parser (Apache JAMES jSPF Resolver 0.9.8-SNAPSHOT API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RFC4408SPF1Parser.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/james/jspf/parser/MatcherBasedConfiguration.html" title="class in org.apache.james.jspf.parser"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/james/jspf/parser/TermDefinition.html" title="interface in org.apache.james.jspf.parser"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/james/jspf/parser/RFC4408SPF1Parser.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RFC4408SPF1Parser.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.james.jspf.parser</FONT>
<BR>
Class RFC4408SPF1Parser</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.james.jspf.parser.RFC4408SPF1Parser</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../org/apache/james/jspf/core/SPFRecordParser.html" title="interface in org.apache.james.jspf.core">SPFRecordParser</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>RFC4408SPF1Parser</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../../org/apache/james/jspf/core/SPFRecordParser.html" title="interface in org.apache.james.jspf.core">SPFRecordParser</A></DL>
</PRE>

<P>
This class is used to parse SPF1-Records from their textual form to an
 SPF1Record object that is composed by 2 collections: directives and
 modifiers.
 
 The parsing is modular and get informations from Mechanism and Modifiers
 classes declared in the org/apache/james/jspf/parser/jspf.default.terms file.
 
 Each term implementation provide its own REGEX in the REGEX static public
 field. This parser simply join all the regexp in a single "alternative"
 pattern and count the number of catch groups (brackets) assigned to each
 regex fragment.
 
 SO it creates a big regex and an array where it store what term is associated
 to each catch group of the big regex.
 
 If the regex matches the input vspf1 record then it start looking for the
 matched group (not null) and lookup the term that created that part of the
 regex.
 
 With this informations it creates a new instance of the term and, if the term
 is ConfigurationEnabled it calls the config() method passing to it only the specific
 subset of the MatchResult (using the MatchResultSubset).
 
 TODO doubts about the specification - redirect or exp with no domain-spec are
 evaluated as an unknown-modifiers according to the current spec (it does not
 make too much sense) - top-label is defined differently in various specs.
 We'll have to review the code. -
 http://data.iana.org/TLD/tlds-alpha-by-domain.txt (we should probably beeter
 use and alpha sequence being at least 2 chars - Somewhere is defined as "."
 TLD [ "." ] - Otherwise defined as ( *alphanum ALPHA *alphanum ) / (
 1*alphanum "-" *( * alphanum / "-" ) alphanum )
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../org/apache/james/jspf/core/SPF1Record.html" title="class in org.apache.james.jspf.core"><CODE>SPF1Record</CODE></A></DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/apache/james/jspf/parser/RFC4408SPF1Parser.html#RFC4408SPF1Parser(org.apache.james.jspf.core.Logger, org.apache.james.jspf.parser.TermsFactory)">RFC4408SPF1Parser</A></B>(<A HREF="../../../../../org/apache/james/jspf/core/Logger.html" title="interface in org.apache.james.jspf.core">Logger</A>&nbsp;logger,
                  <A HREF="../../../../../org/apache/james/jspf/parser/TermsFactory.html" title="interface in org.apache.james.jspf.parser">TermsFactory</A>&nbsp;termsFactory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/james/jspf/core/SPF1Record.html" title="class in org.apache.james.jspf.core">SPF1Record</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/james/jspf/parser/RFC4408SPF1Parser.html#parse(java.lang.String)">parse</A></B>(java.lang.String&nbsp;spfRecord)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This Method parse the given spf record and checks for syntax
 
 parse can be called by multiple concurrent threads.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="RFC4408SPF1Parser(org.apache.james.jspf.core.Logger, org.apache.james.jspf.parser.TermsFactory)"><!-- --></A><H3>
RFC4408SPF1Parser</H3>
<PRE>
public <B>RFC4408SPF1Parser</B>(<A HREF="../../../../../org/apache/james/jspf/core/Logger.html" title="interface in org.apache.james.jspf.core">Logger</A>&nbsp;logger,
                         <A HREF="../../../../../org/apache/james/jspf/parser/TermsFactory.html" title="interface in org.apache.james.jspf.parser">TermsFactory</A>&nbsp;termsFactory)</PRE>
<DL>
<DD>Constructor. Creates all the values needed to run the parsing
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>logger</CODE> - the logger to use<DD><CODE>termsFactory</CODE> - the TermsFactory implementation</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="parse(java.lang.String)"><!-- --></A><H3>
parse</H3>
<PRE>
public <A HREF="../../../../../org/apache/james/jspf/core/SPF1Record.html" title="class in org.apache.james.jspf.core">SPF1Record</A> <B>parse</B>(java.lang.String&nbsp;spfRecord)
                 throws <A HREF="../../../../../org/apache/james/jspf/core/exceptions/PermErrorException.html" title="class in org.apache.james.jspf.core.exceptions">PermErrorException</A>,
                        <A HREF="../../../../../org/apache/james/jspf/core/exceptions/NoneException.html" title="class in org.apache.james.jspf.core.exceptions">NoneException</A>,
                        <A HREF="../../../../../org/apache/james/jspf/core/exceptions/NeutralException.html" title="class in org.apache.james.jspf.core.exceptions">NeutralException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../../org/apache/james/jspf/core/SPFRecordParser.html#parse(java.lang.String)">SPFRecordParser</A></CODE></B></DD>
<DD>This Method parse the given spf record and checks for syntax
 
 parse can be called by multiple concurrent threads.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/apache/james/jspf/core/SPFRecordParser.html#parse(java.lang.String)">parse</A></CODE> in interface <CODE><A HREF="../../../../../org/apache/james/jspf/core/SPFRecordParser.html" title="interface in org.apache.james.jspf.core">SPFRecordParser</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>spfRecord</CODE> - The String which represent the spf record in dns
<DT><B>Returns:</B><DD>result The SPF1Record
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/apache/james/jspf/core/exceptions/PermErrorException.html" title="class in org.apache.james.jspf.core.exceptions">PermErrorException</A></CODE> - Get thrown if an syntax error was detected
<DD><CODE><A HREF="../../../../../org/apache/james/jspf/core/exceptions/NoneException.html" title="class in org.apache.james.jspf.core.exceptions">NoneException</A></CODE> - Get thrown if no spf record could be found
<DD><CODE><A HREF="../../../../../org/apache/james/jspf/core/exceptions/NeutralException.html" title="class in org.apache.james.jspf.core.exceptions">NeutralException</A></CODE> - Get thrown if an empty spf record was found<DT><B>See Also:</B><DD><A HREF="../../../../../org/apache/james/jspf/core/SPFRecordParser.html#parse(java.lang.String)"><CODE>SPFRecordParser.parse(java.lang.String)</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RFC4408SPF1Parser.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/james/jspf/parser/MatcherBasedConfiguration.html" title="class in org.apache.james.jspf.parser"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/james/jspf/parser/TermDefinition.html" title="interface in org.apache.james.jspf.parser"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/james/jspf/parser/RFC4408SPF1Parser.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RFC4408SPF1Parser.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2006-2009 <a href="http://www.apache.org">The Apache Software Foundation</a>. All Rights Reserved.
</BODY>
</HTML>
